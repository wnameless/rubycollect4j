<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>rubycollect4j by wnameless</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">rubycollect4j</h1>
        <p class="header">Ruby Collections for Java</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/wnameless/rubycollect4j/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/wnameless/rubycollect4j/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/wnameless/rubycollect4j">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/wnameless">wnameless</a></p>


      </header>
      <section>
        <p><a href="https://maven-badges.herokuapp.com/maven-central/net.sf.rubycollect4j/rubycollect4j"><img src="https://maven-badges.herokuapp.com/maven-central/net.sf.rubycollect4j/rubycollect4j/badge.svg" alt="Maven Central"></a></p>

<h1>
<a id="rubycollect4j" class="anchor" href="#rubycollect4j" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>rubycollect4j</h1>

<p>Ruby Collections for Java.</p>

<p>The rubycollect4j implements all methods refer to Ruby Array, Hash, Set, Enumerable, Enumerator, Range and String.
It also implements parts of Ruby Dir, File and Date methods.</p>

<p>For further information, please visit <a href="http://ruby-doc.org">http://ruby-doc.org</a> website.</p>

<p>For more documentation, please read JavaDoc on <a href="http://rubycollect4j.sf.net">http://rubycollect4j.sf.net</a> website.</p>

<p>Installation with Maven:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">dependency</span>&gt;
  &lt;<span class="pl-ent">groupId</span>&gt;net.sf.rubycollect4j&lt;/<span class="pl-ent">groupId</span>&gt;
  &lt;<span class="pl-ent">artifactId</span>&gt;rubycollect4j&lt;/<span class="pl-ent">artifactId</span>&gt;
  &lt;<span class="pl-ent">version</span>&gt;${latest.version}&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>

<p>Java 8 with rubycollect4j:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Sorts the characters by its frequency based on the word 'Mississippi' case-insensitively.</span>
<span class="pl-smi">RubyString</span> word <span class="pl-k">=</span> rs(<span class="pl-s"><span class="pl-pds">"</span>Mississippi<span class="pl-pds">"</span></span>); <span class="pl-c">// Equivalent to new RubyString("Mississippi")</span>

<span class="pl-smi">String</span> result <span class="pl-k">=</span> word<span class="pl-k">.</span>map(<span class="pl-smi">String</span><span class="pl-k">::</span>toLowerCase)<span class="pl-k">.</span>sortBy((c) <span class="pl-k">-</span><span class="pl-k">&gt;</span> {
      <span class="pl-k">return</span> word<span class="pl-k">.</span>count(c);
    })<span class="pl-k">.</span>uniq()<span class="pl-k">.</span>join();

p(result);
<span class="pl-c">// Output: "mpis"</span></pre></div>

<p>Java 6 with rubycollect4j:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// Finds 2 words which get the least and the most unique letters in upper case.</span>
<span class="pl-k">RubyArray&lt;<span class="pl-smi">String</span>&gt;</span> words <span class="pl-k">=</span>
  <span class="pl-smi">RubyFile</span><span class="pl-k">.</span>foreach(<span class="pl-s"><span class="pl-pds">"</span>/usr/share/dict/web2<span class="pl-pds">"</span></span>) <span class="pl-c">// Dictionary of Mac OS</span>
    .minmaxBy(<span class="pl-k">new</span> <span class="pl-k">TransformBlock&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Integer</span>&gt;</span>() {
      <span class="pl-k">public</span> <span class="pl-smi">Integer</span> <span class="pl-en">yield</span>(<span class="pl-smi">String</span> <span class="pl-v">item</span>) {
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">RubyString</span>(item)<span class="pl-k">.</span>toA()<span class="pl-k">.</span>uniq()<span class="pl-k">.</span>count();
      }
    })<span class="pl-k">.</span>map«É(<span class="pl-s"><span class="pl-pds">"</span>toUpperCase<span class="pl-pds">"</span></span>);

p(words);
<span class="pl-c">// Output: [A, BLEPHAROCONJUNCTIVITIS]</span></pre></div>

<p>Since v1.9.0,<br>
RubyIterables &amp; RubyStrings are added, they are simply utility classes just like java.util.Arrays.<br>
They provide the Ruby style ways to manipulate any Iterable and String (or CharSequence).<br>
Highly recommended to use with the @ExtensionMethod of <a href="https://projectlombok.org/">Project Lombok</a>.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Iterable&lt;<span class="pl-smi">Integer</span>&gt;</span> ints <span class="pl-k">=</span> <span class="pl-smi">Arrays</span><span class="pl-k">.</span>asList(<span class="pl-c1">3</span>, <span class="pl-c1">6</span>, <span class="pl-c1">7</span>, <span class="pl-c1">2</span>);
<span class="pl-k">int</span> max <span class="pl-k">=</span> <span class="pl-smi">RubyIterables</span><span class="pl-k">.</span>max(ints);
<span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(max);   <span class="pl-c">// Output: 7</span>

<span class="pl-smi">String</span> trStr <span class="pl-k">=</span> <span class="pl-smi">RubyStrings</span><span class="pl-k">.</span>tr(<span class="pl-s"><span class="pl-pds">"</span>Mississippi<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>i<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>I<span class="pl-pds">"</span></span>);
<span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(trStr); <span class="pl-c">// Output: MIssIssIppI</span></pre></div>

<p>Please add following lines before running examples:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import static</span> <span class="pl-smi">net.sf.rubycollect4j.RubyCollections.*</span>;
<span class="pl-k">import static</span> <span class="pl-smi">net.sf.rubycollect4j.RubyKernel.p</span>;</pre></div>

<p>Demo ra() &amp; newRubyArray():</p>

<div class="highlight highlight-source-java"><pre>p( ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>) );                         <span class="pl-c">// Output: [1, 2, 3, 4]</span>
p( ra(ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)) );                           <span class="pl-c">// Output: [[1, 2]]</span>
<span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span> list <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;<span class="pl-smi">Integer</span>&gt;</span>();
list<span class="pl-k">.</span>add(<span class="pl-c1">1</span>);
p( ra(list) );                               <span class="pl-c">// Output: [1]</span>
<span class="pl-k">Map&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">String</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">String</span>&gt;</span>();
map<span class="pl-k">.</span>put(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>);
map<span class="pl-k">.</span>put(<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>);
<span class="pl-c">// Any Iterable or Iterator object can be converted into RubyArray.</span>
p( ra(map<span class="pl-k">.</span>values) );                         <span class="pl-c">// Output: [a, b]</span>
<span class="pl-c">// RubyArray is Comparable if the elements are Comparable.</span>
p( ra(ra(<span class="pl-c1">3</span>, <span class="pl-c1">4</span>), ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>))<span class="pl-k">.</span>sort() );          <span class="pl-c">// Output: [[1, 2], [3, 4]]</span>
<span class="pl-c">// RubyArray is both a List and a Ruby.Enumerable.</span>
p( ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">List</span> );            <span class="pl-c">// Output: true</span>
p( ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> ); <span class="pl-c">// Output: true</span></pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// By default, ra() is just a wrapper to an existed List.</span>
<span class="pl-c">// You can make a defensive copy by following codes.</span>
<span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span> list <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;<span class="pl-smi">Integer</span>&gt;</span>();
list<span class="pl-k">.</span>add(<span class="pl-c1">1</span>);
<span class="pl-k">RubyArray&lt;<span class="pl-smi">Integer</span>&gt;</span> ra <span class="pl-k">=</span> <span class="pl-smi">RubyArray</span><span class="pl-k">.</span>copyOf(list);</pre></div>

<p>Demo rh(), hp(), Hash() &amp; newRubyHash():</p>

<div class="highlight highlight-source-java"><pre>p( rh(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> ,<span class="pl-c1">2</span>) );                        <span class="pl-c">// Output: {a=1, b=2}</span>
<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">HashMap&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>();
map<span class="pl-k">.</span>put(<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>, <span class="pl-c1">123L</span>);
<span class="pl-c">// Any Map can be converted into RubyHash.</span>
p( hp(map) );                                   <span class="pl-c">// Output: {abc=123}</span>
<span class="pl-c">// hp() simply creates an Entry and the word 'hp' means hash pair</span>
p( Hash(ra(hp(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>), hp(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> ,<span class="pl-c1">2</span>))) );          <span class="pl-c">// Output: {a=1, b=2}</span>
p( Hash(rh(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span>)<span class="pl-k">.</span>toA()) );            <span class="pl-c">// Output: {a=1, b=2}</span>
<span class="pl-c">// The Entry of RubyHash is Comparable if the type of the key elements is Comparable.</span>
p( rh(<span class="pl-c1">4</span>, <span class="pl-c1">3</span>, <span class="pl-c1">2</span>, <span class="pl-c1">1</span>)<span class="pl-k">.</span>sort() );                     <span class="pl-c">// Output: [2=1, 4=3]</span>
<span class="pl-c">// RubyHash is both a Map and a Ruby.Enumerable.</span>
p( rh(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Map</span> );             <span class="pl-c">// Output: true</span>
p( rh(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> ); <span class="pl-c">// Output: true</span></pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// By default, rh() makes a copy of input Map.</span>
<span class="pl-c">// You can only wrap a LinkedHashMap up by following codes, because the keys of RubyHash need to be ordered.</span>
<span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">String</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">String</span>&gt;</span>();
map<span class="pl-k">.</span>put(<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>);
<span class="pl-k">RubyHash&lt;<span class="pl-smi">Integer</span>, <span class="pl-smi">String</span>&gt;</span> rh <span class="pl-k">=</span> <span class="pl-smi">RubyHash</span><span class="pl-k">.</span>of(map);</pre></div>

<p>Demo newRubySet():</p>

<div class="highlight highlight-source-java"><pre>p( newRubySet(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>) );                                <span class="pl-c">// Output: [1, 2, 3]</span>
<span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span> list <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">ArrayList&lt;<span class="pl-smi">Integer</span>&gt;</span>();
list<span class="pl-k">.</span>add(<span class="pl-c1">1</span>);
list<span class="pl-k">.</span>add(<span class="pl-c1">1</span>);
<span class="pl-c">// Any Iterable object can be converted into RubySet</span>
p( newRubySet(list) );                                      <span class="pl-c">// Output: [1]</span>
<span class="pl-c">// RubySet is Comparable if the elements are Comparable.</span>
p( newRubySet(newRubySet(<span class="pl-c1">3</span>, <span class="pl-c1">4</span>), newRubySet(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>))<span class="pl-k">.</span>sort() ); <span class="pl-c">// Output: [[1, 2], [3, 4]]</span>
<span class="pl-c">// RubySet is both a Set and a Ruby.Enumerable.</span>
p( newRubySet(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Set</span> );                 <span class="pl-c">// Output: true</span>
p( newRubySet(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">3</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> );     <span class="pl-c">// Output: true</span></pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// By default, newRubySet() makes a copy of input Set.</span>
<span class="pl-c">// You can only wrap a LinkedHashSet up by following codes, because the elements of RubySet need to be ordered.</span>
<span class="pl-k">LinkedHashSet&lt;<span class="pl-smi">Integer</span>&gt;</span> set <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashSet&lt;<span class="pl-smi">Integer</span>&gt;</span>();
set<span class="pl-k">.</span>add(<span class="pl-c1">1</span>);
<span class="pl-k">RubySet&lt;<span class="pl-smi">Integer</span>&gt;</span> rubySet <span class="pl-k">=</span> <span class="pl-smi">RubySet</span><span class="pl-k">.</span>of(set);</pre></div>

<p>Demo rs() &amp; new RubyString():</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// RubyString can be created from any Object.</span>
p( <span class="pl-k">new</span> <span class="pl-smi">RubyString</span>(<span class="pl-c1">1000L</span>)<span class="pl-k">.</span>count(<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>) );                  <span class="pl-c">// Output: 3</span>
<span class="pl-c">// RubyString is also a RubyEnumerable of each character(as String).</span>
p( rs(<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>map(<span class="pl-s"><span class="pl-pds">"</span>codePointAt<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>) );                   <span class="pl-c">// Output: [97, 98, 99]</span>
<span class="pl-c">// RubyString implements fluent interface.</span>
<span class="pl-c">// After multiple actions, you can turn it to a Java String by calling toS().</span>
p( rs(<span class="pl-s"><span class="pl-pds">"</span>ABC<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>chop()<span class="pl-k">.</span>capitalize()<span class="pl-k">.</span>concat(<span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>toS() ); <span class="pl-c">// Output: Ab001</span>
<span class="pl-c">// RubyString is both a CharSequence and a Ruby.Enumerable.</span>
p( rs(<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>) <span class="pl-k">instanceof</span> <span class="pl-smi">CharSequence</span> );                 <span class="pl-c">// Output: true</span>
p( rs(<span class="pl-s"><span class="pl-pds">"</span>abc<span class="pl-pds">"</span></span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> );              <span class="pl-c">// Output: true</span></pre></div>

<p>Demo abstract RubyEnumerable class:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// You can simply make your class inherit all the RubyEnumerable methods by extending it.</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">YourIterableClass</span>&lt;E&gt; <span class="pl-k">extends</span> <span class="pl-e">RubyEnumerable&lt;<span class="pl-smi">E</span>&gt;</span> {
  <span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">Iterable&lt;<span class="pl-smi">E</span>&gt;</span> iter;

  <span class="pl-k">public</span> <span class="pl-en">YourIterableClass</span>(<span class="pl-k">Iterable&lt;<span class="pl-smi">E</span>&gt;</span> <span class="pl-v">iter</span>) { <span class="pl-v">this</span><span class="pl-k">.</span>iter <span class="pl-k">=</span> iter; }

  <span class="pl-k">@Override</span>
  <span class="pl-k">protected</span> <span class="pl-k">Iterable&lt;<span class="pl-smi">E</span>&gt;</span> <span class="pl-en">getIterable</span>() { <span class="pl-k">return</span> iter; }
}

<span class="pl-c">// The class which extends RubyEnumerable becomes a Ruby.Enumerable.</span>
p( <span class="pl-k">new</span> <span class="pl-smi">YourIterableClass</span>(iter) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> ); <span class="pl-c">// Output: true</span></pre></div>

<p>Demo RubyEnumerator.of() &amp; RubyEnumerator.copyOf():</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>() {{ put(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-c1">2L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>, <span class="pl-c1">3L</span>); }};
<span class="pl-c">// Any Iterable object can be wrapped into RubyEnumerator.</span>
<span class="pl-k">RubyEnumerator&lt;<span class="pl-k">Entry&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>&gt;</span> re <span class="pl-k">=</span> <span class="pl-smi">RubyEnumerator</span><span class="pl-k">.</span>of(map<span class="pl-k">.</span>entrySet());
<span class="pl-c">// RubyEnumerator is much like RubyEnumerable, but it is both an Iterator and an Iterable.</span>
p( re <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerator</span> ); <span class="pl-c">// Output: true</span>
p( re <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">Enumerable</span> ); <span class="pl-c">// Output: true</span>
p( re <span class="pl-k">instanceof</span> <span class="pl-smi">Iterator</span> );        <span class="pl-c">// Output: true</span>
p( re <span class="pl-k">instanceof</span> <span class="pl-smi">Iterable</span> );        <span class="pl-c">// Output: true</span>
<span class="pl-c">// It can 'peek' and 'rewind'.</span>
p( re<span class="pl-k">.</span>peek() );                     <span class="pl-c">// Output: a=1</span>
p( re<span class="pl-k">.</span>next() );                     <span class="pl-c">// Output: a=1</span>
p( re<span class="pl-k">.</span>next() );                     <span class="pl-c">// Output: b=2</span>
p( re<span class="pl-k">.</span>peek() );                     <span class="pl-c">// Output: c=3</span>
re<span class="pl-k">.</span>rewind();
p( re<span class="pl-k">.</span>next() );                     <span class="pl-c">// Output: a=1</span></pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// By default, RubyEnumerator.of() is just a wrapper to an existed Iterable.</span>
<span class="pl-c">// You can make a defensive copy by following codes.</span>
<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>() {{ put(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-c1">2L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>, <span class="pl-c1">3L</span>); }};
<span class="pl-k">RubyEnumerator&lt;<span class="pl-k">Entry&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>&gt;</span> re <span class="pl-k">=</span> <span class="pl-smi">RubyEnumerator</span><span class="pl-k">.</span>copyOf(map<span class="pl-k">.</span>entrySet());</pre></div>

<p>Demo RubyLazyEnumerator.of() &amp; RubyLazyEnumerator.copyOf():</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">RubyLazyEnumerator</span> rle <span class="pl-k">=</span> <span class="pl-smi">RubyLazyEnumerator</span><span class="pl-k">.</span>of(<span class="pl-smi">Arrays</span><span class="pl-k">.</span>asList(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>));
<span class="pl-c">// RubyLazyEnumerator is not a Ruby.Enumerable, but it is a Ruby.LazyEnumerator.</span>
p( rle<span class="pl-k">.</span>drop(<span class="pl-c1">1</span>) <span class="pl-k">instanceof</span> <span class="pl-smi">Ruby</span><span class="pl-k">.</span><span class="pl-smi">LazyEnumerator</span> );    <span class="pl-c">// Output: true</span>
p( rle <span class="pl-k">instanceof</span> <span class="pl-smi">Iterator</span> );                       <span class="pl-c">// Output: true</span>
p( rle <span class="pl-k">instanceof</span> <span class="pl-smi">Iterable</span> );                       <span class="pl-c">// Output: true</span>
p( rle<span class="pl-k">.</span>drop(<span class="pl-c1">1</span>)<span class="pl-k">.</span>toA() );                             <span class="pl-c">// Output: [2, 3, 4]</span>
<span class="pl-c">// A RubyLazyEnumerator can also be created by RubyArray#lazy.</span>
p( ra(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>)<span class="pl-k">.</span>lazy()<span class="pl-k">.</span>cycle()<span class="pl-k">.</span>drop(<span class="pl-c1">6</span>)<span class="pl-k">.</span>first() ); <span class="pl-c">// Output: 3</span></pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-c">// By default, RubyLazyEnumerator.of() is just a wrapper to an existed Iterable.</span>
<span class="pl-c">// You can make a defensive copy by following codes.</span>
<span class="pl-k">Map&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedHashMap&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>() {{ put(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-c1">1L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>, <span class="pl-c1">2L</span>); put(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>, <span class="pl-c1">3L</span>); }};
<span class="pl-k">RubyLazyEnumerator&lt;<span class="pl-k">Entry&lt;<span class="pl-smi">String</span>, <span class="pl-smi">Long</span>&gt;</span>&gt;</span> re <span class="pl-k">=</span> <span class="pl-smi">RubyLazyEnumerator</span><span class="pl-k">.</span>copyOf(map<span class="pl-k">.</span>entrySet());</pre></div>

<p>Demo range():</p>

<div class="highlight highlight-source-java"><pre>p( range(<span class="pl-c1">1</span>, <span class="pl-c1">5</span>)<span class="pl-k">.</span>toA() );                                   <span class="pl-c">// Output: [1, 2, 3, 4, 5]</span>
p( range(<span class="pl-s"><span class="pl-pds">"</span>Z<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>AB<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>toA() );                              <span class="pl-c">// Output: [Z, AA, AB]</span>
p( range(<span class="pl-s"><span class="pl-pds">"</span>ZZ-999<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>AAA-001<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>toA() );                    <span class="pl-c">// Output: [ZZ-999, AAA-000, AAA-001]</span>
p( range(<span class="pl-c1">1.08</span>, <span class="pl-c1">1.1</span>)<span class="pl-k">.</span>toA() );                              <span class="pl-c">// Output: [1.08, 1.09, 1.10]</span>
p( range(<span class="pl-s"><span class="pl-pds">"</span>1.08<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>1.1<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>toA() );                          <span class="pl-c">// Output: [1.08, 1.09, 1.10]</span>
p( range(date(<span class="pl-c1">2013</span>, <span class="pl-c1">06</span>, <span class="pl-c1">30</span>), date(<span class="pl-c1">2013</span>, <span class="pl-c1">07</span>, <span class="pl-c1">01</span>))<span class="pl-k">.</span>toA() ); <span class="pl-c">// Output: [Sun Jun 30 00:00:00 CST 2013, Mon Jul 01 00:00:00 CST 2013]</span></pre></div>

<p>Demo date():</p>

<div class="highlight highlight-source-java"><pre>p( date(<span class="pl-c1">2013</span>, <span class="pl-c1">7</span>, <span class="pl-c1">1</span>)<span class="pl-k">.</span>add(<span class="pl-c1">10</span>)<span class="pl-k">.</span>days() );          <span class="pl-c">// Output: Thu Jul 11 00:00:00 CST 2013</span>
p( date(<span class="pl-c1">2013</span>, <span class="pl-c1">7</span>, <span class="pl-c1">1</span>, <span class="pl-c1">21</span>)<span class="pl-k">.</span>minus(<span class="pl-c1">30</span>)<span class="pl-k">.</span>minutes() ); <span class="pl-c">// Output: Mon Jul 01 20:30:00 CST 2013</span>
p( date(<span class="pl-c1">2013</span>, <span class="pl-c1">7</span>, <span class="pl-c1">7</span>, <span class="pl-c1">16</span>, <span class="pl-c1">15</span>, <span class="pl-c1">14</span>)<span class="pl-k">.</span>endOfDay() );  <span class="pl-c">// Output: Sun Jul 07 23:59:59 CST 2013</span>
p( date(<span class="pl-c1">2013</span>, <span class="pl-c1">7</span>, <span class="pl-c1">11</span>)<span class="pl-k">.</span>beginningOfWeek() );      <span class="pl-c">// Output: Sun Jul 07 00:00:00 CST 2013</span>
p( <span class="pl-smi">RubyDate</span><span class="pl-k">.</span>today() );                         <span class="pl-c">// Output: date of today</span>
p( <span class="pl-smi">RubyDate</span><span class="pl-k">.</span>yesterday() );                     <span class="pl-c">// Output: date of yesterday</span>
<span class="pl-smi">Calendar</span> c <span class="pl-k">=</span> <span class="pl-smi">Calendar</span><span class="pl-k">.</span>getInstance();
c<span class="pl-k">.</span>clear();
p( date(c<span class="pl-k">.</span>getTime()) );                        <span class="pl-c">// Output: Thu Jan 01 00:00:00 CST 1970</span>
p( date(<span class="pl-c1">2014</span>, <span class="pl-c1">5</span>, <span class="pl-c1">1</span>)<span class="pl-k">.</span>beginningOfQuarter() );    <span class="pl-c">// Output: Tue Apr 01 00:00:00 CST 2014</span></pre></div>

<p>Demo RubyObject.send():</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">RubyHash&lt;<span class="pl-smi">String</span>, <span class="pl-smi">String</span>&gt;</span> profile <span class="pl-k">=</span> rh(<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>John Doe<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Gender<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Male<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Birthday<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>2001/10/01<span class="pl-pds">"</span></span>);
<span class="pl-c">// Assumes Object person has 3 setters: setName, setGender, setBirthday.</span>
profile<span class="pl-k">.</span>each(<span class="pl-k">new</span> <span class="pl-k">EntryBlock&lt;<span class="pl-smi">String</span>, <span class="pl-smi">String</span>&gt;</span>() {
  <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">yield</span>(<span class="pl-smi">String</span> <span class="pl-v">key</span>, <span class="pl-smi">String</span> <span class="pl-v">value</span>) {
    <span class="pl-smi">RubyObject</span><span class="pl-k">.</span>send(person, <span class="pl-s"><span class="pl-pds">"</span>set<span class="pl-pds">"</span></span> <span class="pl-k">+</span> key, value);
  }
});
<span class="pl-c">// As you can see, RubyObject.send() is a wrapper to Java Reflection.</span></pre></div>

<p>Demo qw():</p>

<div class="highlight highlight-source-java"><pre>p( qw(<span class="pl-s"><span class="pl-pds">"</span>a bc def<span class="pl-pds">"</span></span>) ); <span class="pl-c">// Output: [a, bc, def]</span></pre></div>

<p>Demo qx():</p>

<div class="highlight highlight-source-java"><pre>p( qx(<span class="pl-s"><span class="pl-pds">"</span>echo<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>hello<span class="pl-pds">"</span></span>) ); <span class="pl-c">// Output: hello</span></pre></div>

<p>Demo qr():</p>

<div class="highlight highlight-source-java"><pre>p( qr(<span class="pl-s"><span class="pl-pds">"</span>^<span class="pl-cce">\\</span>d+$<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>matcher(<span class="pl-s"><span class="pl-pds">"</span>123<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>find() ); <span class="pl-c">// Output: true</span></pre></div>

<p>Demo RubyDir:</p>

<pre lang="text"><code>folder1
       /folder1-1
                 /file1-1-1
                 /file1-1-2
       /folder1-2
                 /file1-2-1
                 /file1-2-2
                 /file1-2-3
       /file1-1
       /file1-2
       /file1-3
       /file1-4
</code></pre>

<div class="highlight highlight-source-java"><pre>p( <span class="pl-smi">RubyDir</span><span class="pl-k">.</span>glob(<span class="pl-s"><span class="pl-pds">"</span>folder1/*<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>sort() );                 <span class="pl-c">// Output: [file1-1, file1-2, file1-3, file1-4, folder1-1, folder1-2]</span>
p( <span class="pl-smi">RubyDir</span><span class="pl-k">.</span>glob(<span class="pl-c1">GLOB_DIR</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>**/*1-*-1*<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>sort() );     <span class="pl-c">// Output: [folder1/folder1-1/file1-1-1, folder1/folder1-2/file1-2-1]</span>
p( <span class="pl-smi">RubyDir</span><span class="pl-k">.</span>glob(<span class="pl-c1">GLOB_DIR</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>folder1/*[2,3]<span class="pl-pds">"</span></span>)<span class="pl-k">.</span>sort() ); <span class="pl-c">// Output: [file1-2, file1-3, folder1-2]</span></pre></div>

<p>Demo RubyFile:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">RubyFile</span> rf <span class="pl-k">=</span> <span class="pl-smi">RubyFile</span><span class="pl-k">.</span>open(<span class="pl-s"><span class="pl-pds">"</span>test.txt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r+<span class="pl-pds">"</span></span>);
rf<span class="pl-k">.</span>puts(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>);
rf<span class="pl-k">.</span>puts(<span class="pl-s"><span class="pl-pds">"</span>bc<span class="pl-pds">"</span></span>);
rf<span class="pl-k">.</span>puts(<span class="pl-s"><span class="pl-pds">"</span>def<span class="pl-pds">"</span></span>);
rf<span class="pl-k">.</span>close();
rf <span class="pl-k">=</span> <span class="pl-smi">RubyFile</span><span class="pl-k">.</span>open(<span class="pl-s"><span class="pl-pds">"</span>test.txt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>r<span class="pl-pds">"</span></span>);
p( rf<span class="pl-k">.</span>eachLine()<span class="pl-k">.</span>toA() );                         <span class="pl-c">// Output: [a, bc, def]</span>
rf<span class="pl-k">.</span>close();
<span class="pl-c">// The method foreach() closes the stream automatically.</span>
<span class="pl-smi">RubyFile</span><span class="pl-k">.</span>foreach(<span class="pl-s"><span class="pl-pds">"</span>test.txt<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-k">Block&lt;<span class="pl-smi">String</span>&gt;</span>() {
  <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">yield</span>(<span class="pl-smi">String</span> <span class="pl-v">item</span>) {
    <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>print( item );
  }
});                                               <span class="pl-c">// Output: abcdef</span>
p( <span class="pl-smi">RubyFile</span><span class="pl-k">.</span>join(<span class="pl-s"><span class="pl-pds">"</span>/home/<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>/ruby<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>collect<span class="pl-pds">"</span></span>) ); <span class="pl-c">// Output: "/home/ruby/collect"</span></pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
